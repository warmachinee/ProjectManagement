(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["SignIn"],{

/***/ "./src/component/Account/SignIn.tsx":
/*!******************************************!*\
  !*** ./src/component/Account/SignIn.tsx ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-loadable */ \"./node_modules/react-loadable/lib/index.js\");\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core/styles */ \"./node_modules/@material-ui/core/esm/styles/index.js\");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../AppContext */ \"./src/AppContext.tsx\");\n/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/colors */ \"./node_modules/@material-ui/core/esm/colors/index.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst GeneralDialog = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | GeneralDialog */[__webpack_require__.e(\"vendors~ConfirmDialog~GeneralDialog~Header~ProjectTableBody~TaskTable\"), __webpack_require__.e(\"GeneralDialog\")]).then(__webpack_require__.bind(null, /*! ../Dialog/GeneralDialog */ \"./src/component/Dialog/GeneralDialog.tsx\")),\r\n    loading: () => null\r\n});\r\nconst useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__[\"makeStyles\"])(theme => ({\r\n    root: {\r\n        padding: theme.spacing(2, 3),\r\n        backgroundColor: \"white\",\r\n        opacity: 0.96,\r\n        maxWidth: 300,\r\n        width: \"100%\",\r\n        height: \"max-content\"\r\n    },\r\n    textField: {\r\n        marginBottom: 12\r\n    },\r\n    submitButton: {\r\n        marginTop: 12,\r\n        marginBottom: 8,\r\n        width: \"100%\"\r\n    },\r\n    sendForgotButton: {\r\n        width: \"100%\",\r\n        margin: theme.spacing(2, 0)\r\n    }\r\n}));\r\nconst SignIn = props => {\r\n    const classes = useStyles();\r\n    const { apiUrl, fetchPost, handleCheckSession, booleanReducer, useForm, _onEnter } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"]);\r\n    const [{ forgot }, booleanDispatch] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useReducer\"])(booleanReducer, { forgot: false });\r\n    const [{ username, password, forgotEmail }, formOnChange] = useForm({\r\n        username: \"\",\r\n        password: \"\",\r\n        forgotEmail: \"\"\r\n    });\r\n    const [errorMsg, setErrMsg] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({\r\n        username: { state: false, message: \"\" },\r\n        password: { state: false, message: \"\" }\r\n    });\r\n    async function handleLogIn() {\r\n        setErrMsg({\r\n            username: { state: false, message: \"\" },\r\n            password: { state: false, message: \"\" }\r\n        });\r\n        const response = await fetchPost({\r\n            url: apiUrl(\"login\"),\r\n            body: {\r\n                username: username,\r\n                password: password\r\n            }\r\n        });\r\n        switch (response.status) {\r\n            case \"wrong email\":\r\n                setErrMsg({\r\n                    username: { state: true, message: \"Wrong email\" },\r\n                    password: { state: false, message: \"\" }\r\n                });\r\n                break;\r\n            case \"wrong password\":\r\n                setErrMsg({\r\n                    username: { state: false, message: \"\" },\r\n                    password: { state: true, message: \"Wrong password\" }\r\n                });\r\n                break;\r\n            case \"success\":\r\n                await handleCheckSession();\r\n                break;\r\n            default:\r\n                setErrMsg({\r\n                    username: { state: false, message: \"\" },\r\n                    password: { state: false, message: \"\" }\r\n                });\r\n                break;\r\n        }\r\n    }\r\n    async function handleRecoverPassword() {\r\n        console.log(forgotEmail);\r\n        const response = await fetchPost({\r\n            url: apiUrl(\"forgotpassword\"),\r\n            body: {\r\n                email: forgotEmail\r\n            }\r\n        });\r\n        console.log(response);\r\n        if (response.status) {\r\n            booleanDispatch({ type: \"false\", key: \"forgot\" });\r\n        }\r\n        await handleCheckSession();\r\n    }\r\n    // useRenderCheck(\"SignIn\", []);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Paper\"], { elevation: 4, className: classes.root },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { gutterBottom: true, variant: \"h5\", style: { marginBottom: 24, marginTop: 24 }, align: \"center\" }, \"Sign in\"),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { autoFocus: true, error: errorMsg.username.state, helperText: errorMsg.username.message, className: classes.textField, fullWidth: true, name: \"username\", placeholder: \"Username\", variant: \"outlined\", \r\n            // label=\"Username\"\r\n            onChange: formOnChange, onKeyPress: _onEnter(handleLogIn) }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { error: errorMsg.password.state, helperText: errorMsg.password.message, className: classes.textField, fullWidth: true, name: \"password\", placeholder: \"Password\", variant: \"outlined\", \r\n            // label=\"Password\"\r\n            type: \"password\", onChange: formOnChange, onKeyPress: _onEnter(handleLogIn) }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], { disabled: username === \"\" || password === \"\", className: classes.submitButton, size: \"large\", color: \"primary\", variant: \"contained\", onClick: handleLogIn }, \"Sign in\"),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { display: \"flex\", justifyContent: \"flex-end\" } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], { size: \"small\", style: { color: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__[\"grey\"][600] }, onClick: () => booleanDispatch({\r\n                    type: \"true\",\r\n                    key: \"forgot\"\r\n                }) }, \"Forgot ?\")),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GeneralDialog, { open: forgot, onClose: () => booleanDispatch({ type: \"false\", key: \"forgot\" }), title: \"Recover password\" },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { textAlign: \"center\" } },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { autoFocus: forgot, name: \"forgotEmail\", className: classes.textField, fullWidth: true, variant: \"outlined\", placeholder: \"Input your email\", onChange: formOnChange, onKeyPress: _onEnter(handleRecoverPassword) }),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], { color: \"primary\", variant: \"contained\", className: classes.sendForgotButton, size: \"large\", onClick: handleRecoverPassword }, \"Send\")))));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (SignIn);\r\n\n\n//# sourceURL=webpack:///./src/component/Account/SignIn.tsx?");

/***/ })

}]);