(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["ProjectTable"],{

/***/ "./src/component/Table/Project/ProjectTable.tsx":
/*!******************************************************!*\
  !*** ./src/component/Table/Project/ProjectTable.tsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-loadable */ \"./node_modules/react-loadable/lib/index.js\");\n/* harmony import */ var react_loadable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_loadable__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core/styles */ \"./node_modules/@material-ui/core/esm/styles/index.js\");\n/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core */ \"./node_modules/@material-ui/core/esm/index.js\");\n/* harmony import */ var _AppContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../AppContext */ \"./src/AppContext.tsx\");\n\r\n\r\n\r\n\r\n\r\nconst ProjectTableHead = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => __webpack_require__.e(/*! import() | ProjectTableHead */ \"ProjectTableHead\").then(__webpack_require__.bind(null, /*! ./ProjectTableHead */ \"./src/component/Table/Project/ProjectTableHead.tsx\")),\r\n    loading: () => null\r\n});\r\nconst ProjectTableBody = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | ProjectTableBody */[__webpack_require__.e(\"vendors~ConfirmDialog~GeneralDialog~Header~ProjectTableBody~RouteProject\"), __webpack_require__.e(\"vendors~Customization~HardwareSoftware~ProjectTableBody~TaskTable~Training\"), __webpack_require__.e(\"ProjectTableBody\")]).then(__webpack_require__.bind(null, /*! ./ProjectTableBody */ \"./src/component/Table/Project/ProjectTableBody.tsx\")),\r\n    loading: () => null\r\n});\r\nconst GeneralDialog = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | GeneralDialog */[__webpack_require__.e(\"vendors~ConfirmDialog~GeneralDialog~Header~ProjectTableBody~RouteProject\"), __webpack_require__.e(\"GeneralDialog\")]).then(__webpack_require__.bind(null, /*! ../../Dialog/GeneralDialog */ \"./src/component/Dialog/GeneralDialog.tsx\")),\r\n    loading: () => null\r\n});\r\nconst ConfirmDialog = react_loadable__WEBPACK_IMPORTED_MODULE_1___default()({\r\n    loader: () => Promise.all(/*! import() | ConfirmDialog */[__webpack_require__.e(\"vendors~ConfirmDialog~GeneralDialog~Header~ProjectTableBody~RouteProject\"), __webpack_require__.e(\"ConfirmDialog\")]).then(__webpack_require__.bind(null, /*! ../../Dialog/ConfirmDialog */ \"./src/component/Dialog/ConfirmDialog.tsx\")),\r\n    loading: () => null\r\n});\r\nconst useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__[\"makeStyles\"])(theme => ({\r\n    tablePaper: {\r\n        margin: \"0 auto\",\r\n        maxWidth: 1200\r\n    },\r\n    table: {\r\n        maxHeight: window.innerHeight * 0.9\r\n    },\r\n    tableToolbar: {\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n        flexDirection: \"column\"\r\n    },\r\n    formControl: { margin: theme.spacing(1, 0) },\r\n    radioGroup: { flexDirection: \"row\" },\r\n    textField: { marginBottom: 12 },\r\n    createProjectButton: {\r\n        width: \"100%\",\r\n        margin: theme.spacing(2, 0, 1, 0)\r\n    }\r\n}));\r\nconst FormCreateProject = props => {\r\n    const classes = useStyles();\r\n    const { projectType, setProjectType, createProject, formOnChange, handleCreateProject, projectName, _onEnter } = props;\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"FormControl\"], { component: \"fieldset\", className: classes.formControl },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"FormLabel\"], { component: \"legend\" }, \"Project Type\"),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"RadioGroup\"], { className: classes.radioGroup, value: projectType, onChange: e => setProjectType(e.target.value) },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"FormControlLabel\"], { value: \"1\", control: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Radio\"], { color: \"primary\" }), label: \"Normal\" }),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"FormControlLabel\"], { value: \"2\", control: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Radio\"], { color: \"primary\" }), label: \"Maintenance Assistant\" }))),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TextField\"], { autoFocus: createProject, fullWidth: true, variant: \"outlined\", placeholder: \"Project name\", name: \"projectName\", onChange: formOnChange, onKeyPress: _onEnter(handleCreateProject) }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], { disabled: projectName === \"\", variant: \"contained\", color: \"primary\", className: classes.createProjectButton, onClick: handleCreateProject }, \"Create\")));\r\n};\r\nconst ProjectTable = () => {\r\n    const classes = useStyles();\r\n    const { apiUrl, fetchPost, booleanReducer, useForm, _onEnter, _onLocalhostFn } = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"]);\r\n    const [{ createProject, confirmDelete }, booleanDispatch] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useReducer\"])(booleanReducer, {\r\n        createProject: false,\r\n        confirmDelete: false\r\n    });\r\n    const [projectList, setProjectList] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const [projectType, setProjectType] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"1\");\r\n    const [{ projectName }, formOnChange] = useForm({\r\n        projectName: \"\"\r\n    });\r\n    const [onDeleteProjectData, setOnDeleteProjectData] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\r\n    const passingProps = {\r\n        ...Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"]),\r\n        projectList,\r\n        setProjectList,\r\n        booleanDispatch,\r\n        onDeleteProject,\r\n        handleLoadProject,\r\n        handleMoveProject\r\n    };\r\n    function onDeleteProject(projectData) {\r\n        setOnDeleteProjectData(projectData);\r\n        booleanDispatch({ type: \"true\", key: \"confirmDelete\" });\r\n    }\r\n    function onCancelDeleteProject() {\r\n        setOnDeleteProjectData(null);\r\n        booleanDispatch({ type: \"false\", key: \"confirmDelete\" });\r\n    }\r\n    async function handleCreateProject() {\r\n        const response = await fetchPost({\r\n            url: apiUrl(\"projectsystem\"),\r\n            body: {\r\n                action: \"create\",\r\n                type: parseInt(projectType),\r\n                projectname: projectName\r\n            }\r\n        });\r\n        if (response.status === \"success\") {\r\n            booleanDispatch({ type: \"false\", key: \"createProject\" });\r\n        }\r\n        await handleLoadProject();\r\n    }\r\n    async function handleMoveProject(current, target) {\r\n        const response = await fetchPost({\r\n            url: apiUrl(\"projectsystem\"),\r\n            body: {\r\n                action: \"move\",\r\n                selectseq: current.sequence,\r\n                movetoseq: target.sequence\r\n            }\r\n        });\r\n        await handleLoadProject();\r\n    }\r\n    async function handleDeleteProject() {\r\n        if (onDeleteProjectData) {\r\n            const response = await fetchPost({\r\n                url: apiUrl(\"projectsystem\"),\r\n                body: {\r\n                    action: \"delete\",\r\n                    projectid: onDeleteProjectData.projectid\r\n                }\r\n            });\r\n            if (response.status === \"success\") {\r\n                onCancelDeleteProject();\r\n            }\r\n            await handleLoadProject();\r\n        }\r\n    }\r\n    async function handleLoadProject() {\r\n        const response = await fetchPost({\r\n            url: apiUrl(\"loadproject\"),\r\n            body: { action: \"list\" }\r\n        });\r\n        setProjectList(response);\r\n    }\r\n    function handleFetchTemp() {\r\n        setProjectList({\r\n            list: [\r\n                {\r\n                    projectid: 7558969,\r\n                    sequence: 2,\r\n                    projectname: \"IT Project\",\r\n                    stage_current: 1,\r\n                    startdate: null,\r\n                    enddate: null,\r\n                    projectcost: 0,\r\n                    status: \"inprogress\"\r\n                },\r\n                {\r\n                    projectid: 6622391,\r\n                    sequence: 3,\r\n                    projectname: \"Task Management\",\r\n                    stage_current: 1,\r\n                    startdate: null,\r\n                    enddate: null,\r\n                    projectcost: 0,\r\n                    status: \"inprogress\"\r\n                },\r\n                {\r\n                    projectid: 9422312,\r\n                    sequence: 3,\r\n                    projectname: \"Energy Project\",\r\n                    stage_current: 1,\r\n                    startdate: \"2020-01-11T17:00:00.000Z\",\r\n                    enddate: \"2020-03-04T17:00:00.000Z\",\r\n                    projectcost: 20000000,\r\n                    status: \"inprogress\"\r\n                },\r\n                {\r\n                    projectid: 6847487,\r\n                    sequence: 4,\r\n                    projectname: \"Smart farm\",\r\n                    stage_current: 1,\r\n                    startdate: null,\r\n                    enddate: null,\r\n                    projectcost: 0,\r\n                    status: \"inprogress\"\r\n                }\r\n            ],\r\n            totalcost: 20000000\r\n        });\r\n    }\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        _onLocalhostFn(handleFetchTemp, handleLoadProject);\r\n    }, []);\r\n    const TableController = () => {\r\n        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Toolbar\"], { className: classes.tableToolbar },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { variant: \"h5\", style: { paddingTop: 16 } }, \"Project\"),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { display: \"flex\", width: \"100%\", padding: \"8px 0\" } },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Button\"], { variant: \"contained\", color: \"primary\", onClick: () => booleanDispatch({ type: \"true\", key: \"createProject\" }) }, \"Add Project\"))));\r\n    };\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AppContext__WEBPACK_IMPORTED_MODULE_4__[\"AppContext\"].Provider, { value: passingProps },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: { padding: 8 } },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Paper\"], { elevation: 2, className: classes.tablePaper },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TableController, null),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"TableContainer\"], { className: classes.table },\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Table\"], { stickyHeader: true },\r\n                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProjectTableHead, null),\r\n                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProjectTableBody, null)))),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GeneralDialog, { open: createProject, onClose: () => booleanDispatch({ type: \"false\", key: \"createProject\" }), title: \"Create Project\" },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FormCreateProject, Object.assign({}, {\r\n                    projectType,\r\n                    setProjectType,\r\n                    createProject,\r\n                    formOnChange,\r\n                    handleCreateProject,\r\n                    projectName,\r\n                    _onEnter\r\n                }))),\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConfirmDialog, { type: \"delete\", open: confirmDelete, onClose: onCancelDeleteProject, onCancel: onCancelDeleteProject, onSubmit: handleDeleteProject, title: \"Are you sure you want to delete ?\" },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__[\"Typography\"], { variant: \"h6\", style: { fontWeight: 400 }, align: \"center\" }, onDeleteProjectData && onDeleteProjectData.projectname)))));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (ProjectTable);\r\n\n\n//# sourceURL=webpack:///./src/component/Table/Project/ProjectTable.tsx?");

/***/ })

}]);